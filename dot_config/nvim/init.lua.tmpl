-- ==================== Neovim Main Configuration (Unix/WSL) ====================
-- This file is managed by chezmoi. It will be rendered as ~/.config/nvim/init.lua
-- on Unix-like systems (including WSL).

-- Platform guard: ensure this config is used on Unix-like systems only.
if vim.fn.has('win32') == 1 then
    vim.notify(
        "Error: This Neovim configuration is intended for Unix-like systems (including WSL). "
            .. "It appears you are running on native Windows. Please use the appropriate config.",
        vim.log.levels.ERROR
    )
    return
end

-- 1. Load common Vimscript core (netrw fallback, basic settings)
vim.cmd [[
{{ template "editors/common/core.vim" . }}
]]

-- (No Windows-specific env on Unix)

-- 2. Load Neovim-specific core (options, lazy.nvim bootstrap)
{{ template "editors/nvim/core.lua" . }}

-- 3. Load common Vimscript mappings (universal save/quit, etc.)
vim.cmd [[
{{ template "editors/common/mappings.vim" . }}
]]

-- 4. Load Neovim-specific mappings (non-plugin)
{{ template "editors/nvim/mappings.lua" . }}

-- 5. Load plugins using lazy.nvim
require('lazy').setup({{ template "editors/nvim/plugins.lua" . }})
