" ========== Smart entry point: ~/.vimrc ==========
" This file is the first configuration loaded by Vim on Unix-like systems.
" It attempts to load the appropriate main configuration file:
" 1. XDG path (~/.config/vim/vimrc) – preferred location (even for older Vim)
" 2. Traditional path (~/.vim/vimrc) – fallback if XDG config missing
" If both are missing, falls back to minimal defaults.

" Try XDG config (respect $XDG_CONFIG_HOME if set)
if exists('$XDG_CONFIG_HOME') && !empty($XDG_CONFIG_HOME)
  let s:xdg_config = $XDG_CONFIG_HOME . '/vim/vimrc'
else
  let s:xdg_config = expand('~/.config/vim/vimrc')
endif
if filereadable(s:xdg_config)
  execute 'source' s:xdg_config
  finish
endif

" Fallback to traditional config
let s:legacy_config = expand('~/.vim/vimrc')
if filereadable(s:legacy_config)
  execute 'source' s:legacy_config
  finish
endif

" If no config found, use minimal defaults
echo "No Vim config found, using minimal defaults."
set nocompatible
syntax on
