" ========== Windows Vim Configuration ==========
" This file is managed by chezmoi. Rendered as ~/vimfiles/vimrc.
" It is intended for Windows only. If loaded on other systems, it warns and exits.

" ----- Platform guard: only proceed on Windows -----
if !has('win32') && !has('win64')
    echohl WarningMsg
    echo "Warning: This Vim configuration is intended for Windows only."
    echo "It appears you are running on a Unix-like system. Exiting."
    echohl None
    finish
endif

" ----- Include common core (basic settings, directories, shell, clipboard) -----
{{ template "editors/common/core.vim" . }}

" ----- Include Windows-specific environment -----
{{ template "editors/env/windows.vim" . }}

" ----- Include Vim core (auto-install vim-plug) -----
{{ template "editors/vim/core.vim" . }}

" ----- vim-plug settings -----
" Plugin directory â€“ use s:vim_data_dir defined in common/core.
let s:plugged_dir = s:vim_data_dir . '/plugged'

" Plugin list (from shared template).
call plug#begin(s:plugged_dir)
{{ template "editors/vim/plugins.vim" . }}
call plug#end()

" ----- Key mappings -----
{{ template "editors/common/mappings.vim" . }}
{{ template "editors/vim/mappings.vim" . }}
